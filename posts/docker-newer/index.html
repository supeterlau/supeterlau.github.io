<!doctype html><html><head><title>开始使用Docker | CodeMist</title><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=keywords content="docker,web"><meta name=description content="Blog about Hugo, web design, CSS/SCSS, SEO, Tools"><link rel=stylesheet href=/lib/icofont/icofont.min.css><link rel=stylesheet href=/css/syntax.css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/images/favicon.ico type=image/x-icon></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-YEDG0XLC2T"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YEDG0XLC2T")</script><body><header class=header-wrapper><div class=header><a class=site-title href=https://www.peterlau.xyz>CodeMist</a><div class=menu><ul class=menu-left><li class=menu-item><a href=/posts/>Posts</a></li><li class=menu-item>"I saw the best minds of my generation destroyed by madness"</li></ul><div class=menu-right><li class=menu-item><a href=/contact/>Contact</a></li></div></div></div></header><main class=main-wrapper><div class=main><section class=single><h1 class=title>开始使用Docker</h1><div class=tip><time datetime="2014-09-05 20:16:09 +0000 UTC">2014/09/05</time>
<span class=split>·</span>
<span>1034 words</span>
<span class=split>·</span>
<span>3 minutes to read</span></div><div class=taxonomies><div>Tags:
<a href=/tags/docker>docker</a>
<a href=/tags/web>web</a></div></div><hr><div class=content><h1 id=什么是-docker>什么是 Docker? <a href=#%e4%bb%80%e4%b9%88%e6%98%af-docker class=anchor>🔗</a></h1><p>Go语言编写的应用容器.所谓应用容器,就是可以像虚拟机那样下载下来,已经配置好大部分的开发环境(比如有了一些 Python 包, Gem 装好了一部分).新一代的一次构建到处运行.据说开始是基于 LXC ,这个还没有研究.不过已经宣布将来不再依赖这个, 而是变成可插拔的插件, 插件流行啊.</p><p>这货像是个虚拟机,但不带图形界面,当然对我这种命令控没影响.说起来像是通过 SSH 访问Vbox.</p><h1 id=开始使用>开始使用 <a href=#%e5%bc%80%e5%a7%8b%e4%bd%bf%e7%94%a8 class=anchor>🔗</a></h1><p>注册 docker.io dockerhub 帐号 不注册也可以用&mldr;</p><ol><li>curl -s <a href=https://get.docker.io/ubuntu/>https://get.docker.io/ubuntu/</a> | sudo sh</li><li>sudo docker run -i -t ubuntu /bin/bash</li></ol><p>下载的是一个ubuntu镜像 或者 ubuntu:14.04 指定是 14.04 版本</p><p>下载后的镜像称为容器, 在容器内可以运行应用如 bash</p><ol start=3><li>sudo docker run ubuntu:14.04 /bin/echo &lsquo;Hello world&rsquo;</li></ol><p>输出 Hello world 在容器内执行, 返回结果</p><ol start=4><li>sudo docker run -t -i ubuntu:14.04 /bin/bash</li></ol><p>执行交互式容器, 不过是在14.04版本中运行的</p><ol start=5><li>每次 docker run 的时候就是通过一个镜像创建了一个容器, 如后台容器</li></ol><p>守护进程 sudo docker run -d ubuntu:14.04 /bin/sh -c &ldquo;while true; do echo hello world; sleep 1; done&rdquo;</p><p>脚本会一直输出"hello word"</p><p>只有通过 sudo docker ps 查看后台进程找到指代名称</p><p>然后用 sudo docker log short-name 查看结果</p><ol start=6><li><p>sudo docker stop 结束这个后台</p></li><li><p>只输入docker没有任何其它选项来查看docker客户端所有的命令</p></li><li><p>输入Docker [command]，这里会看到docker命令的使用方法：</p></li></ol><p>$ sudo docker attach</p><ol start=9><li>sudo docker run -d -P training/webapp python app.py</li></ol><p>-d 后台执行</p><p>-P docker网络端口从主机映射到容器</p><p>training/webapp 指定镜像</p><p>python 容器</p><p>see ubuntu version:
cat /etc/issue
see whoami
whoami</p><ol start=10><li>查看web应用容器</li></ol><p>sudo docker ps -l # -l 返回最后的容器状态</p><p>CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
9a57847b4be6 training/webapp:latest &ldquo;python app.py&rdquo; 5 minutes ago Up 5 minutes 0.0.0.0:49153->5000/tcp trusting_sammet</p><p>容器开启 5000(python) 端口映射到主机 49153 上</p><p>可以访问 localhost:49153 到容器的webapp上</p><ol start=11><li>使用docker port可以指定容器ID或者名字映射到主机端的端口号</li></ol><p>sudo docker port nostalgic_morse 5000</p><p>查看到端口5000映射到容器外的主机端口</p><ol start=12><li>sudo docker logs -f hungry_stallman</li></ol><p>查看容器内应用发生的日志</p><ol start=13><li>sudo docker top hungry_stallman</li></ol><p>查看应用的过程</p><ol start=14><li><p>使用docker inspect来查看Docker的底层信息。它会返回一个JSON文件记录docker容器的配置和状态信息</p></li><li><p>sudo docker stop hungry_stallman</p><p>停止容器</p><p>sudo docker start hungry_stallman</p><p>重启容器</p><p>sudo docker rm hungry_stallman</p><p>删除容器 == 我们不能删除正在运行的容器</p></li><li><p>获取一个新的镜像</p></li></ol><p>sudo docker run -t -i training/sinatra /bin/bash</p><p>进入容器的bash中</p><ol start=17><li></li></ol><p>运行一个带标签镜像的容器：</p><p>$ sudo docker run -t -i ubuntu:14.04 /bin/bash</p><p>例如你只使用Ubuntu，Docker将默认使用Ubuntu:latest镜像。</p><ol start=18><li><p>sudo docker pull centos 获取新镜像</p></li><li><p>如何把多个docker容器连接在一起构建一个完整的应用程序</p></li><li><p><em>HOWTO</em> 退出docker 保留docker配置&mldr;</p></li></ol><p>一开始想着试试 perl6 呢,谁知道配置好 vim (对的, vim 都没有, 也没有图形界面 啊) 退出以后就一切重置了, 难道要按照 DOCKERFILE 什么的步骤走吗??? 以后再看吧. Perl 看来得再找时间看看了.</p></div><hr><script src=https://utteranc.es/client.js repo=supeterlau/supeterlau.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script></section></div><div class=side><div class=side-recent><h2 class=side-title>Recent Posts</h2><hr><ul><li><a href=/posts/2023-06-05-emacs-tips/>Emacs Tips</a></li><li><a href=/posts/2023-06-05-ssh-tips/>SSH Tips</a></li><li><a href=/posts/hugo-tips/>Hugo Tips</a></li><li><a href=/posts/postgresql-logical-replication-with-docker-and-elixir/>PostgreSQL Logical Replication with Docker and Elixir</a></li><li><a href=/posts/missing-steps-of-heroku-docker/>Missing Steps of Heroku</a></li></ul></div><div class=side-categories><h2>Categories</h2><hr><ul><li><a href=/categories/ai>ai(1)</a></li><li><a href=/categories/blockchain>blockchain(1)</a></li><li><a href=/categories/dart>dart(1)</a></li><li><a href=/categories/dev>dev(3)</a></li><li><a href=/categories/note>note(1)</a></li></ul></div><div class=side-tags><h2>Tags</h2><hr><ul><li><a href=/tags/alasmixer>alasmixer (1)</a></li><li><a href=/tags/audio>audio (1)</a></li><li><a href=/tags/bash>bash (1)</a></li><li><a href=/tags/blog>blog (1)</a></li><li><a href=/tags/django>django (1)</a></li><li><a href=/tags/docker>docker (2)</a></li><li><a href=/tags/dota2>dota2 (1)</a></li><li><a href=/tags/elixir>elixir (1)</a></li><li><a href=/tags/ethereum>ethereum (1)</a></li><li><a href=/tags/flask>flask (1)</a></li><li><a href=/tags/go>go (1)</a></li><li><a href=/tags/goeast>goeast (1)</a></li><li><a href=/tags/hexo>hexo (3)</a></li><li><a href=/tags/hugo>hugo (1)</a></li><li><a href=/tags/image>image (1)</a></li><li><a href=/tags/jamstack>jamstack (1)</a></li><li><a href=/tags/lisp>lisp (1)</a></li><li><a href=/tags/macos>macos (2)</a></li><li><a href=/tags/node>node (1)</a></li><li><a href=/tags/openai>openai (1)</a></li><li><a href=/tags/permission>permission (1)</a></li><li><a href=/tags/pg>pg (1)</a></li><li><a href=/tags/php>php (1)</a></li><li><a href=/tags/python>python (3)</a></li><li><a href=/tags/ror>ror (1)</a></li><li><a href=/tags/ruby>ruby (1)</a></li><li><a href=/tags/sae>sae (1)</a></li><li><a href=/tags/safe>safe (1)</a></li><li><a href=/tags/ssg>ssg (1)</a></li><li><a href=/tags/ssh>ssh (2)</a></li><li><a href=/tags/sudo>sudo (1)</a></li><li><a href=/tags/test>test (1)</a></li><li><a href=/tags/tips>tips (2)</a></li><li><a href=/tags/ubuntu>ubuntu (1)</a></li><li><a href=/tags/vagrant>vagrant (1)</a></li><li><a href=/tags/video>video (1)</a></li><li><a href=/tags/web>web (2)</a></li><li><a href=/tags/%E7%BF%BB%E8%AF%91>翻译 (1)</a></li></ul></div></div></main><footer class=footer><div class=footer-row><a class=footer-item href=https://www.peterlau.xyz/posts/index.xml>Feed of Posts
<i class=icofont-rss></i></a></div><div class=footer-row><span class=footer-item>Copyright <a href=https://creativecommons.org/licenses/by/4.0/>CC BY-4.0</a> 2022</span></div><div class=footer-row><span class=footer-item>Powered by <a href=https://gohugo.io>Hugo</a></span>
<span class=footer-item>Theme <a href=https://github.com/leafee98/hugo-theme-flat>hugo-theme-flat</a></span></div></footer></body></html>