<!doctype html><html><head><title>å¦‚ä½•ç¼–å†™ Go - Part2 å®Œç»“ç¯‡ | CodeMist</title><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=keywords content><meta name=description content="Blog about Hugo, web design, CSS/SCSS, SEO, Tools"><link rel=stylesheet href=/lib/icofont/icofont.min.css><link rel=stylesheet href=/css/syntax.css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/images/favicon.ico type=image/x-icon></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-YEDG0XLC2T"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YEDG0XLC2T")</script><body><header class=header-wrapper><div class=header><a class=site-title href=https://www.peterlau.xyz>CodeMist</a><div class=menu><ul class=menu-left><li class=menu-item><a href=/posts/>Posts</a></li><li class=menu-item>"I saw the best minds of my generation destroyed by madness"</li></ul><div class=menu-right><li class=menu-item><a href=/contact/>Contact</a></li></div></div></div></header><main class=main-wrapper><div class=main><section class=single><h1 class=title>å¦‚ä½•ç¼–å†™ Go - Part2 å®Œç»“ç¯‡</h1><div class=tip><time datetime="2017-04-23 00:09:39 +0800 +0800">2017/04/23</time>
<span class=split>Â·</span>
<span>1287 words</span>
<span class=split>Â·</span>
<span>3 minutes to read</span></div><div class=taxonomies></div><hr><div class=content><blockquote><h2 id=ç¬¬ä¸€ä¸ªåº“>ç¬¬ä¸€ä¸ªåº“ <a href=#%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%ba%93 class=anchor>ğŸ”—</a></h2></blockquote><p>æˆ‘ä»¬å°†ä¼šå†™ä¸€ä¸ªåº“å¹¶åœ¨ <code>hello</code> ç¨‹åºä¸­ä½¿ç”¨å®ƒã€‚</p><p>ç¬¬ä¸€æ­¥æ˜¯é€‰æ‹©ä¸€ä¸ªåŒ…è·¯å¾„ (æˆ‘ä»¬ä¼šä½¿ç”¨ <code>github.com/user/stringutil</code> )å¹¶åˆ›å»ºåº“æ–‡ä»¶å¤¹:</p><pre><code>$ mkdir $GOPATH/src/github.com/user/stringutil
</code></pre><p>ä¸‹ä¸€æ­¥ï¼Œåœ¨ç›®å½•ä¸‹åˆ›å»ºå«åš <code>reverse.go</code> çš„æ–‡ä»¶ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å†…å®¹</p><pre><code>// Package returns its argument string reversed rune-wise left to right
package stringutil

// Reverse æŒ‰å­—ç¬¦å°†å‚æ•° string ç¿»è½¬
func Reverse(s string) string {
    r := []rune(s)
    for i, j := 0, len(r)-1; i &lt; len(r)/2; i,j=i+1,j-1 {
        r[i], r[j] = r[j], r[i]
    }
    return string(r)
}
</code></pre><p>ç°åœ¨ï¼Œç”¨ <code>go build</code> æ¥ç¼–è¯‘æµ‹è¯•è¿™ä¸ªåŒ…:</p><pre><code>$ go build github.com/user/stringutil 
</code></pre><p>å¦‚æœä½ åœ¨åŒ…æ–‡ä»¶å¤¹è·¯å¾„ï¼Œå¯ä»¥åªæ‰§è¡Œ:</p><pre><code>$ go build
</code></pre><p>è¿™ä¸ä¼šäº§ç”Ÿä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ã€‚ä½ å¿…é¡»ä½¿ç”¨ <code>go install</code>ï¼Œè¿™å¯ä»¥å°†åŒ…å¯¹è±¡æ”¾åœ¨å·¥ä½œç©ºé—´çš„ <code>pkg</code> æ–‡ä»¶å¤¹ä¸‹ã€‚</p><p>åœ¨ç¡®è®¤ <code>stringutil</code> åŒ…ç¼–è¯‘å®Œæˆåï¼Œ ä¿®æ”¹ä½ åŸå§‹çš„ <code>hello.go</code> (ä½äº <code>$GOPATH/src/github.com/user/hello</code> ä¸‹) æ¥ä½¿ç”¨è¿™ä¸ªåŒ…:</p><pre><code>package main

import (
  &quot;fmt&quot;
  &quot;github.com/user/stringutil&quot;
)

func main() {
    fmt.Printf(stringutil.Reverse(&quot;!oG ,olleH&quot;))
}
</code></pre><p>æ¯å½“ <code>go</code> å·¥å…·å®‰è£…ä¸€ä¸ªåŒ…æˆ–äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œå®ƒåŒæ—¶å®‰è£…äº†è¿™ä¸ªåŒ…åŒ…å«çš„ä¾èµ–ã€‚ æ‰€ä»¥å½“ä½ å®‰è£… hello program æ—¶ï¼Œ</p><pre><code>$ go install github.com/user/hello
</code></pre><p>stringutil åŒ…ä¼šåŒæ—¶è¢«è‡ªåŠ¨å®‰è£…ã€‚</p><p>è¿è¡Œæ–°ç‰ˆæœ¬çš„ç¨‹åºï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªæ–°çš„ç¿»è½¬çš„ä¿¡æ¯:</p><pre><code>$hello
Hello, Go!
</code></pre><p>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œä½ çš„å·¥ä½œç©ºé—´çœ‹èµ·æ¥åƒè¿™æ ·:</p><pre><code>bin/
  hello
pkg/
  linux_amd64/      # å–å†³äºä½ ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿå’Œæ¶æ„
    github.com/user/
      stringutil.a  # åŒ…é¡¹ç›®
src/
  github.com/user/
    hello/
      hello.go
    stringutil/
      reverse.go
</code></pre><p>æ³¨æ„ <code>go install</code> å°† <code>stringutil.a</code> æ”¾åœ¨ <code>pkg/linux_amd64</code> ä¸‹å’Œæºç è·¯å¾„ä¸€è‡´çš„å­æ–‡ä»¶å¤¹ä¸‹ã€‚è¿™æ ·æ–¹ä¾¿ <code>go</code> å·¥å…·æ‰¾åˆ°åŒ…æ–‡ä»¶ä»è€Œé¿å…é‡å¤ç¼–è¯‘è¿™ä¸ªåŒ…ã€‚ <code>linux_amd64</code> è¿™éƒ¨åˆ†æ˜¯ä¸ºäº†è¾…åŠ©äº¤å‰ç¼–è¯‘ï¼Œå¹¶ä¼šåæ˜ ä½ çš„æ“ä½œç³»ç»ŸåŠç³»ç»Ÿæ¶æ„ã€‚</p><p><code>Go</code> å¯æ‰§è¡Œæ–‡ä»¶æ˜¯é™æ€é“¾æ¥çš„ï¼›è¿è¡Œ <code>Go</code> ç¨‹åºä¸éœ€è¦åŒ…æ–‡ä»¶ã€‚</p><blockquote><h2 id=åŒ…å>åŒ…å <a href=#%e5%8c%85%e5%90%8d class=anchor>ğŸ”—</a></h2></blockquote><p><code>Go</code> æºä»£ç ç¬¬ä¸€è¡Œå¿…é¡»æ˜¯ <code>package name</code>ã€‚ <code>name</code> å°±æ˜¯ç”¨æ¥å¯¼å…¥åŒ…çš„é»˜è®¤åå­—ã€‚(åŒä¸€ä¸ªåŒ…é‡Œçš„æ–‡ä»¶éœ€è¦æœ‰ç›¸åŒçš„åŒ…å)ã€‚</p><p><code>Go</code> ä¸­åŒ…åæ˜¯å¯¼å…¥è·¯å¾„æœ€åä¸€ä¸ªå…ƒç´ : ä½œä¸º <code>"crypto/rot13"</code> å¯¼å…¥çš„åŒ…ï¼ŒåŒ…åæ˜¯ <code>"rot13"</code>ã€‚</p><p>å¯æ‰§è¡Œå‘½ä»¤å¿…é¡»ä½¿ç”¨ <code>main</code> ä½œä¸º <code>package name</code>ã€‚</p><p><code>Go</code> ä¸è¦æ±‚é“¾æ¥åˆ°ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„åŒ…åä¸åŒï¼Œåªéœ€è¦å¯¼å…¥è·¯å¾„å”¯ä¸€å³å¯ã€‚</p><p>æŸ¥çœ‹ <code>Effective Go</code> æ¥å­¦ä¹ æ›´å¤šå…³äº <code>Go</code> å‘½åæƒ¯ä¾‹çš„å†…å®¹ã€‚</p><blockquote><h1 id=æµ‹è¯•>æµ‹è¯• <a href=#%e6%b5%8b%e8%af%95 class=anchor>ğŸ”—</a></h1></blockquote><p><code>Go</code> åŒ…å«äº†ä¸€ä¸ªç”± <code>go test</code> å‘½ä»¤å’Œ <code>testing</code> åŒ…ç»„æˆçš„è½»é‡çº§æµ‹è¯•æ¡†æ¶ã€‚
ä½ é€šè¿‡åˆ›å»ºä¸€ä¸ªä»¥ <code>_test.go</code> ç»“å°¾çš„æ–‡ä»¶æ¥å†™æµ‹è¯•ï¼Œæ–‡ä»¶ä¸­åŒ…å«å‘½åä¸º <code>TestXXX</code> å‚æ•°ç­¾åä¸º ( <code>t *testing.T</code> ) çš„æµ‹è¯•å‡½æ•°ã€‚æµ‹è¯•æ¡†æ¶æ‰§è¡Œæ¯ä¸ªè¿™æ ·çš„å‡½æ•°ï¼›å¦‚æœå‡½æ•°è°ƒç”¨äº†ä¸€ä¸ªç±»ä¼¼ <code>t.Error</code> æˆ– <code>t.Fail</code> çš„å¤±è´¥å‡½æ•°ï¼Œæµ‹è¯•è¢«è®¤ä¸ºæœªé€šè¿‡ã€‚
åˆ›å»ºæ–‡ä»¶ <code>$GOPATH/src/github.com/user/stringutil/reverse_test.go</code> æ¥æ·»åŠ æµ‹è¯•åˆ° <code>stringutil</code> åŒ…ï¼ŒåŒ…å«å¦‚ä¸‹ä»£ç :</p><p>ç„¶åç”¨ <code>go test</code> æ¥è¿è¡Œæµ‹è¯•ã€‚</p><pre><code>$ go test github.com/user/stringutil
ok github.com/user/stringutil 0.165s
</code></pre><p>åŒæ ·ï¼Œå¦‚æœä½ å°±åœ¨åŒ…è·¯å¾„ä¸‹ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œ:</p><pre><code>$ go test
ok github.com/user/stringutil 0.165s
</code></pre><p>æ‰§è¡Œ <code>go help test</code> å¯ä»¥çœ‹åˆ°æµ‹è¯•åŒ…çš„æ–‡æ¡£ã€‚</p><blockquote><h2 id=è¿œç¨‹åŒ…>è¿œç¨‹åŒ… <a href=#%e8%bf%9c%e7%a8%8b%e5%8c%85 class=anchor>ğŸ”—</a></h2></blockquote><p>å¯¼å…¥è·¯å¾„å¯ä»¥ç”¨æ¥æè¿°å¦‚ä½•é€šè¿‡ Git æˆ– Mercurial è¿™æ ·çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ¥è·å–åŒ…æºç ã€‚go å·¥å…·é€šè¿‡è¿™ä¸ªç‰¹æ€§æ¥ä»è¿œç«¯è‡ªåŠ¨è·å–åŒ…ã€‚ä¾‹å¦‚ï¼Œæœ¬æ–‡æ¡£ä¸­çš„ä¾‹å­æœ‰ä¸ªæ‰˜ç®¡åœ¨ Github ä¸Šçš„ Git ä»“åº“ <a href=https://github.com/golang/example>github.com/golang/example</a>ã€‚å¦‚æœä½ åœ¨å¯¼å…¥æ—¶åŠ ä¸Šè¿™ä¸ªä»“åº“ï¼Œgo get ä¼šè‡ªåŠ¨è·å–ï¼Œæ„å»ºå¹¶å®‰è£…è¿™ä¸ªåŒ…ã€‚</p><pre><code>$ go get github.com/golang/example/hello

$ $GOPATH/bin/hello
Helloï¼ŒGo examplesï¼
</code></pre><p>å¦‚æœç‰¹å®šçš„ä¸€ä¸ªåŒ…æ²¡æœ‰åœ¨å·¥ä½œç©ºé—´ä¸­ï¼Œ<code>go get</code> ä¼šå°†å®ƒæ”¾åœ¨ <code>GOPATH</code> æŒ‡å®šçš„ç¬¬ä¸€ä¸ªå·¥ä½œç©ºé—´ã€‚(å¦‚æœè¿™ä¸ªåŒ…å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆ <code>go get</code> ä¼šè·³è¿‡è·å–è¿œç¨‹ä»£ç ï¼Œä»…è¿›è¡Œ <code>go install</code> æ­¥éª¤)ã€‚</p><p>æ‰§è¡Œè¿‡ä¸Šè¿°çš„ <code>go get</code> å‘½ä»¤åï¼Œå·¥ä½œç›®å½•ä¼šå˜æˆä¸€ä¸‹ç»“æ„:</p><pre><code>bin/
  hello
pkg/
  linux_amd64/      # å–å†³äºä½ ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿå’Œæ¶æ„
    github.com/golang/example/
      stringutil.a  # åŒ…é¡¹ç›®    
    github.com/user/
      stringutil.a  # åŒ…é¡¹ç›®
src/
  github.com/golang/example/
    hello/
      hello.go
    stringutil/
      reverse.go
      reverse_test.go
  github.com/user/
    hello/
      hello.go
    stringutil/
      reverse.go
      reverse_test.go
</code></pre><p>æ‰˜ç®¡åœ¨ <code>GitHub</code> ä¸Šçš„ <code>hello</code> å‘½ä»¤ä¾èµ–äºåŒä¸€ä¸ªä»“åº“é‡Œçš„ <code>stringutil</code> åŒ…ã€‚<code>hello.go</code> æ–‡ä»¶é‡Œå¯¼å…¥åŒ…æ—¶ä½¿ç”¨äº†åŒæ ·çš„å¯¼å…¥è§„åˆ™ï¼Œå› æ­¤ <code>go get</code> å‘½ä»¤å¯ä»¥å®šä½å¹¶å®‰è£…è¿™ä¸ªä¾èµ–ã€‚</p><p><code>import "github.com/golang/example/stringutil"</code> è¿™ç§æ–¹æ³•æ˜¯ä½¿ä½ çš„åŒ…å¯ä»¥è¢«åˆ«äººä½¿ç”¨çš„æœ€ç®€å•é€”å¾„ã€‚ <code>Go Wiki</code> å’Œ <code>godoc.org</code> æä¾›äº†å…¶ä»– <code>Go</code> é¡¹ç›®åˆ—è¡¨ã€‚</p><p>æŸ¥çœ‹ <code>go help importpath</code> æ¥äº†è§£æ›´å¤šé€šè¿‡ <code>go tool</code> ä½¿ç”¨è¿œç¨‹ä»“åº“çš„ä¿¡æ¯ã€‚</p></div><hr><script src=https://utteranc.es/client.js repo=supeterlau/supeterlau.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script></section></div><div class=side><div class=side-recent><h2 class=side-title>Recent Posts</h2><hr><ul><li><a href=/posts/2023-06-05-emacs-tips/>Emacs Tips</a></li><li><a href=/posts/2023-06-05-ssh-tips/>SSH Tips</a></li><li><a href=/posts/hugo-tips/>Hugo Tips</a></li><li><a href=/posts/postgresql-logical-replication-with-docker-and-elixir/>PostgreSQL Logical Replication with Docker and Elixir</a></li><li><a href=/posts/missing-steps-of-heroku-docker/>Missing Steps of Heroku</a></li></ul></div><div class=side-categories><h2>Categories</h2><hr><ul><li><a href=/categories/ai>ai(1)</a></li><li><a href=/categories/blockchain>blockchain(1)</a></li><li><a href=/categories/dart>dart(1)</a></li><li><a href=/categories/dev>dev(3)</a></li><li><a href=/categories/note>note(1)</a></li></ul></div><div class=side-tags><h2>Tags</h2><hr><ul><li><a href=/tags/alasmixer>alasmixer (1)</a></li><li><a href=/tags/audio>audio (1)</a></li><li><a href=/tags/bash>bash (1)</a></li><li><a href=/tags/blog>blog (1)</a></li><li><a href=/tags/django>django (1)</a></li><li><a href=/tags/docker>docker (2)</a></li><li><a href=/tags/dota2>dota2 (1)</a></li><li><a href=/tags/elixir>elixir (1)</a></li><li><a href=/tags/ethereum>ethereum (1)</a></li><li><a href=/tags/flask>flask (1)</a></li><li><a href=/tags/go>go (1)</a></li><li><a href=/tags/goeast>goeast (1)</a></li><li><a href=/tags/hexo>hexo (3)</a></li><li><a href=/tags/hugo>hugo (1)</a></li><li><a href=/tags/image>image (1)</a></li><li><a href=/tags/jamstack>jamstack (1)</a></li><li><a href=/tags/lisp>lisp (1)</a></li><li><a href=/tags/macos>macos (2)</a></li><li><a href=/tags/node>node (1)</a></li><li><a href=/tags/openai>openai (1)</a></li><li><a href=/tags/permission>permission (1)</a></li><li><a href=/tags/pg>pg (1)</a></li><li><a href=/tags/php>php (1)</a></li><li><a href=/tags/python>python (3)</a></li><li><a href=/tags/ror>ror (1)</a></li><li><a href=/tags/ruby>ruby (1)</a></li><li><a href=/tags/sae>sae (1)</a></li><li><a href=/tags/safe>safe (1)</a></li><li><a href=/tags/ssg>ssg (1)</a></li><li><a href=/tags/ssh>ssh (2)</a></li><li><a href=/tags/sudo>sudo (1)</a></li><li><a href=/tags/test>test (1)</a></li><li><a href=/tags/tips>tips (2)</a></li><li><a href=/tags/ubuntu>ubuntu (1)</a></li><li><a href=/tags/vagrant>vagrant (1)</a></li><li><a href=/tags/video>video (1)</a></li><li><a href=/tags/web>web (2)</a></li><li><a href=/tags/%E7%BF%BB%E8%AF%91>ç¿»è¯‘ (1)</a></li></ul></div></div></main><footer class=footer><div class=footer-row><a class=footer-item href=https://www.peterlau.xyz/posts/index.xml>Feed of Posts
<i class=icofont-rss></i></a></div><div class=footer-row><span class=footer-item>Copyright <a href=https://creativecommons.org/licenses/by/4.0/>CC BY-4.0</a> 2024</span></div><div class=footer-row><span class=footer-item>Powered by <a href=https://gohugo.io>Hugo</a></span>
<span class=footer-item>Theme <a href=https://github.com/leafee98/hugo-theme-flat>hugo-theme-flat</a></span></div></footer></body></html>