<!doctype html><html><head><title>Missing Steps of Heroku | CodeMist</title><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=keywords content><meta name=description content="Blog about Hugo, web design, CSS/SCSS, SEO, Tools"><link rel=stylesheet href=/lib/icofont/icofont.min.css><link rel=stylesheet href=/css/syntax.css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/images/favicon.ico type=image/x-icon></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-YEDG0XLC2T"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YEDG0XLC2T")</script><body><header class=header-wrapper><div class=header><a class=site-title href=https://www.peterlau.xyz>CodeMist</a><div class=menu><ul class=menu-left><li class=menu-item><a href=/posts/>Posts</a></li><li class=menu-item>"I saw the best minds of my generation destroyed by madness"</li></ul><div class=menu-right><li class=menu-item><a href=/contact/>Contact</a></li></div></div></div></header><main class=main-wrapper><div class=main><section class=single><h1 class=title>Missing Steps of Heroku</h1><div class=tip><time datetime="2019-09-17 15:19:17 +0800 +0800">2019/09/17</time>
<span class=split>·</span>
<span>194 words</span>
<span class=split>·</span>
<span>1 minutes to read</span></div><div class=taxonomies></div><hr><div class=content><h3 id=docker>Docker <a href=#docker class=anchor>🔗</a></h3><p>根据 Dockerfile 构建镜像：</p><p><code>docker build . -t &lt;your_image_name></code></p><p><code>heroku container:push &lt;your_image_name></code></p><p><code>heroku container:release &lt;your_image_name></code></p><p><code>heroku open</code></p><p>Got Error: Expected response to be successful, got 422
Name is invalid</p><p><code>HEROKU_DEBUG=1 heroku container:release &lt;your_organization>/&lt;your_image_name>:&lt;your_image_tag></code></p><p><a href=https://stackoverflow.com/questions/57846015/heroku-name-is-invalid-when-deploy-docker-image-how-to-debug>https://stackoverflow.com/questions/57846015/heroku-name-is-invalid-when-deploy-docker-image-how-to-debug</a></p><p><code>heroku open</code></p><p>Real-time tail</p><p><code>heroku logs --tail</code></p><p><a href=https://stackoverflow.com/questions/41804507/h14-error-in-heroku-no-web-processes-running>https://stackoverflow.com/questions/41804507/h14-error-in-heroku-no-web-processes-running</a></p><p>原因：没有启动 dyno Heroku 最小计算单元</p><p>如果使用 Procfile 可以用命令</p><p>heroku ps:scale web=1</p><p>对应 Procfile</p><p>web: gunicorn -w 4 -b 0.0.0.0:$PORT -k gevent main:app</p><p>没有用 Procfile 可以去应用 Resources 下</p><p><a href=https://dashboard.heroku.com/apps/pure-fjord-97245/resources>https://dashboard.heroku.com/apps/pure-fjord-97245/resources</a></p><p>修改 dyno 状态</p><p>heroku login -i 保持在终端下登录</p><p>heroku apps</p><p>docker-compose build</p><p>Your Ruby version is 2.5.6, but your Gemfile specified 2.5.3</p><p>Dockerfile
FROM ruby:2.5 -> FROM ruby:2.5.3</p><p>docker-compose run &ndash;rm web rails db:create</p><p>Deployment to Heroku
$ heroku update beta<br>$ heroku plugins:install @heroku-cli/plugin-manifest
$ heroku apps:create &ndash;manifest
$ heroku addons:create heroku-postgresql:hobby-dev</p><p>heroku addons:create heroku-postgresql:hobby-dev -a bebopx_hello-heroku.1</p><p>heroku addons:create heroku-postgresql:hobby-dev -a pure-fjord-97245</p><p>$ heroku config:set RAILS_MASTER_KEY=<code>cat config/master.key</code>
$ heroku config:set RACK_ENV=production RAILS_ENV=production
$ heroku config:set RAILS_SERVE_STATIC_FILES=enabled
$ heroku config:set WEB_CONCURRENCY=2
$ heroku config:set LANG=en_US.UTF-8</p><p><a href=https://blog.teamtreehouse.com/deploy-static-site-heroku>https://blog.teamtreehouse.com/deploy-static-site-heroku</a></p></div><hr><script src=https://utteranc.es/client.js repo=supeterlau/supeterlau.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script></section></div><div class=side><div class=side-recent><h2 class=side-title>Recent Posts</h2><hr><ul><li><a href=/posts/2023-06-05-emacs-tips/>Emacs Tips</a></li><li><a href=/posts/2023-06-05-ssh-tips/>SSH Tips</a></li><li><a href=/posts/hugo-tips/>Hugo Tips</a></li><li><a href=/posts/postgresql-logical-replication-with-docker-and-elixir/>PostgreSQL Logical Replication with Docker and Elixir</a></li><li><a href=/posts/missing-steps-of-heroku-docker/>Missing Steps of Heroku</a></li></ul></div><div class=side-categories><h2>Categories</h2><hr><ul><li><a href=/categories/ai>ai(1)</a></li><li><a href=/categories/blockchain>blockchain(1)</a></li><li><a href=/categories/dart>dart(1)</a></li><li><a href=/categories/dev>dev(3)</a></li><li><a href=/categories/note>note(1)</a></li></ul></div><div class=side-tags><h2>Tags</h2><hr><ul><li><a href=/tags/alasmixer>alasmixer (1)</a></li><li><a href=/tags/audio>audio (1)</a></li><li><a href=/tags/bash>bash (1)</a></li><li><a href=/tags/blog>blog (1)</a></li><li><a href=/tags/django>django (1)</a></li><li><a href=/tags/docker>docker (2)</a></li><li><a href=/tags/dota2>dota2 (1)</a></li><li><a href=/tags/elixir>elixir (1)</a></li><li><a href=/tags/ethereum>ethereum (1)</a></li><li><a href=/tags/flask>flask (1)</a></li><li><a href=/tags/go>go (1)</a></li><li><a href=/tags/goeast>goeast (1)</a></li><li><a href=/tags/hexo>hexo (3)</a></li><li><a href=/tags/hugo>hugo (1)</a></li><li><a href=/tags/image>image (1)</a></li><li><a href=/tags/jamstack>jamstack (1)</a></li><li><a href=/tags/lisp>lisp (1)</a></li><li><a href=/tags/macos>macos (2)</a></li><li><a href=/tags/node>node (1)</a></li><li><a href=/tags/openai>openai (1)</a></li><li><a href=/tags/permission>permission (1)</a></li><li><a href=/tags/pg>pg (1)</a></li><li><a href=/tags/php>php (1)</a></li><li><a href=/tags/python>python (3)</a></li><li><a href=/tags/ror>ror (1)</a></li><li><a href=/tags/ruby>ruby (1)</a></li><li><a href=/tags/sae>sae (1)</a></li><li><a href=/tags/safe>safe (1)</a></li><li><a href=/tags/ssg>ssg (1)</a></li><li><a href=/tags/ssh>ssh (2)</a></li><li><a href=/tags/sudo>sudo (1)</a></li><li><a href=/tags/test>test (1)</a></li><li><a href=/tags/tips>tips (2)</a></li><li><a href=/tags/ubuntu>ubuntu (1)</a></li><li><a href=/tags/vagrant>vagrant (1)</a></li><li><a href=/tags/video>video (1)</a></li><li><a href=/tags/web>web (2)</a></li><li><a href=/tags/%E7%BF%BB%E8%AF%91>翻译 (1)</a></li></ul></div></div></main><footer class=footer><div class=footer-row><a class=footer-item href=https://www.peterlau.xyz/posts/index.xml>Feed of Posts
<i class=icofont-rss></i></a></div><div class=footer-row><span class=footer-item>Copyright <a href=https://creativecommons.org/licenses/by/4.0/>CC BY-4.0</a> 2022</span></div><div class=footer-row><span class=footer-item>Powered by <a href=https://gohugo.io>Hugo</a></span>
<span class=footer-item>Theme <a href=https://github.com/leafee98/hugo-theme-flat>hugo-theme-flat</a></span></div></footer></body></html>